# Archive
The responsibility of this service is to pull relevant FHIR messages from Kafka and archive them as PDFs in Joark.

The intent is to use a REST API to generate and return a PDF from a FHIR message json. This convert-api should be implemented by the front-end team according to [the convert operation spec.](http://hl7.org/fhir/resource-operation-convert.html), this is yet to be done.

Both the original Json and the generated PDF should be archived as a "Journalpost" using the [Dokarkiv REST API](https://confluence.adeo.no/display/BOA/opprettJournalpost), this process must be idempotent.

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgQSBhcyBBcmNoaXZlXG4gICAgcGFydGljaXBhbnQgQyBhcyBDb252ZXJ0ZXJcbiAgICBwYXJ0aWNpcGFudCBEIGFzIERva2Fya2l2XG4gICAgcGFydGljaXBhbnQgSyBhcyBLYWZrYVxuICAgIGxvb3BcbiAgICBBLT4-SzogR2V0IEZISVIgTWVzc2FnZVxuICAgIGFjdGl2YXRlIEFcbiAgICBLLT4-QTogRkhJUiBNZXNzYWdlIHtqc29ufVxuICAgIEEtPj5DOiBDb252ZXJ0IHRvIFBERiB7anNvbn1cbiAgICBhY3RpdmF0ZSBDXG4gICAgQy0-PkE6IE9LIHtwZGZ9XG4gICAgZGVhY3RpdmF0ZSBDXG4gICAgQS0-PkQ6IFBPU1Qgam91cm5hbHBvc3Qge3BkZiwganNvbn1cbiAgICBhY3RpdmF0ZSBEXG4gICAgRC0-PkE6IE9LXG4gICAgZGVhY3RpdmF0ZSBEXG4gICAgQS0-Pks6IFVwZGF0ZSBvZmZzZXRcbiAgICBkZWFjdGl2YXRlIEFcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlLCJhdXRvU3luYyI6dHJ1ZSwidXBkYXRlRGlhZ3JhbSI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/edit/#eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgcGFydGljaXBhbnQgQSBhcyBBcmNoaXZlXG4gICAgcGFydGljaXBhbnQgQyBhcyBDb252ZXJ0ZXJcbiAgICBwYXJ0aWNpcGFudCBEIGFzIERva2Fya2l2XG4gICAgcGFydGljaXBhbnQgSyBhcyBLYWZrYVxuICAgIGxvb3BcbiAgICBBLT4-SzogR2V0IEZISVIgTWVzc2FnZVxuICAgIGFjdGl2YXRlIEFcbiAgICBLLT4-QTogRkhJUiBNZXNzYWdlIHtqc29ufVxuICAgIEEtPj5DOiBDb252ZXJ0IHRvIFBERiB7anNvbn1cbiAgICBhY3RpdmF0ZSBDXG4gICAgQy0-PkE6IE9LIHtwZGZ9XG4gICAgZGVhY3RpdmF0ZSBDXG4gICAgQS0-PkQ6IFBPU1Qgam91cm5hbHBvc3Qge3BkZiwganNvbn1cbiAgICBhY3RpdmF0ZSBEXG4gICAgRC0-PkE6IE9LXG4gICAgZGVhY3RpdmF0ZSBEXG4gICAgQS0-Pks6IFVwZGF0ZSBvZmZzZXRcbiAgICBkZWFjdGl2YXRlIEFcbiAgICBlbmQiLCJtZXJtYWlkIjoie1xuICBcInRoZW1lXCI6IFwiZGVmYXVsdFwiXG59IiwidXBkYXRlRWRpdG9yIjpmYWxzZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOmZhbHNlfQ)